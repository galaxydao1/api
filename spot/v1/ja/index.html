
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>TradePlanet API書類</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-d7ff0a2f.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-628c1a7f.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;python&quot;,&quot;csharp&quot;]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <header>
      <div class="flex_box">
        <img src="images/logo-407dc1bf.png" class="logo" id="trade-planet-logo" alt="" />
        <div class="nav_box">
          <span class="nav-select" id="spot-class-current">
            <a href="/api/spot/v1/zh/" id="spot-txt"></a>
          </span>
          <span class="nav-select" id="future-class-current">
            <a href="/api/futures/v1/zh/" id="future-txt"></a>
          </span>
        </div>
      </div>
      <a href="/api/spot/v1/zh/" class="lang" id="lang_box1"></a>
      <a href="/api/spot/v1/zh/" class="lang" id="lang_box2"></a>
    </header>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="csharp">csharp</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API導入">API導入</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#6cb2d1cdf8" class="toc-h2 toc-link" data-title="署名インターフェイスのリクエストメソッド">署名インターフェイスのリクエストメソッド</a>
                  </li>
                  <li>
                    <a href="#810d45e4da" class="toc-h2 toc-link" data-title="ネットワークテスト">ネットワークテスト</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#b26ab813ed" class="toc-h1 toc-link" data-title="市場">市場</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#617ae03773" class="toc-h2 toc-link" data-title="取引ペアのクエリ">取引ペアのクエリ</a>
                  </li>
                  <li>
                    <a href="#k" class="toc-h2 toc-link" data-title="クエリ K 行">クエリ K 行</a>
                  </li>
                  <li>
                    <a href="#b405992e60" class="toc-h2 toc-link" data-title="すべての通貨の市場状況を確認する">すべての通貨の市場状況を確認する</a>
                  </li>
                  <li>
                    <a href="#df37d856e6" class="toc-h2 toc-link" data-title="単一通貨の市場状況をクエリする">単一通貨の市場状況をクエリする</a>
                  </li>
                  <li>
                    <a href="#25e63fc590" class="toc-h2 toc-link" data-title="市場の厚みを確認する">市場の厚みを確認する</a>
                  </li>
                  <li>
                    <a href="#ece7ea71a1" class="toc-h2 toc-link" data-title="契約記録の照会">契約記録の照会</a>
                  </li>
                  <li>
                    <a href="#ticker" class="toc-h2 toc-link" data-title="市場をチェックするticker">市場をチェックするticker</a>
                  </li>
                  <li>
                    <a href="#a45ac5562e" class="toc-h2 toc-link" data-title="注文制限情報">注文制限情報</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#apikey" class="toc-h1 toc-link" data-title="アセット情報 (ApiKey が必要)">アセット情報 (ApiKey が必要)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#6090d19d71" class="toc-h2 toc-link" data-title="ウォレットアカウントの資産">ウォレットアカウントの資産</a>
                  </li>
                  <li>
                    <a href="#10737e2b9d" class="toc-h2 toc-link" data-title="スポットアカウント資産">スポットアカウント資産</a>
                  </li>
                  <li>
                    <a href="#1a018e4e05" class="toc-h2 toc-link" data-title="入金アドレスを取得する">入金アドレスを取得する</a>
                  </li>
                  <li>
                    <a href="#a471daf080" class="toc-h2 toc-link" data-title="提现">提现</a>
                  </li>
                  <li>
                    <a href="#1255247768" class="toc-h2 toc-link" data-title="リチャージ記録のクエリ">リチャージ記録のクエリ</a>
                  </li>
                  <li>
                    <a href="#70150c311e" class="toc-h2 toc-link" data-title="出金記録のクエリ">出金記録のクエリ</a>
                  </li>
                  <li>
                    <a href="#f2a984a5a2" class="toc-h2 toc-link" data-title="通貨設定を取得する">通貨設定を取得する</a>
                  </li>
                  <li>
                    <a href="#bc4800446c" class="toc-h2 toc-link" data-title="特定の出金記録を照会する">特定の出金記録を照会する</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#apikey-2" class="toc-h1 toc-link" data-title="現物取引（ApiKeyが必要）">現物取引（ApiKeyが必要）</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#14982d1b16" class="toc-h2 toc-link" data-title="注文する">注文する</a>
                  </li>
                  <li>
                    <a href="#eb78d07f3b" class="toc-h2 toc-link" data-title="注文をキャンセルする">注文をキャンセルする</a>
                  </li>
                  <li>
                    <a href="#ead10c07f1" class="toc-h2 toc-link" data-title="注文を一括でキャンセルする">注文を一括でキャンセルする</a>
                  </li>
                  <li>
                    <a href="#32fa02b6a5" class="toc-h2 toc-link" data-title="すべての注文をキャンセルする">すべての注文をキャンセルする</a>
                  </li>
                  <li>
                    <a href="#5267b1a751" class="toc-h2 toc-link" data-title="現在の注文">現在の注文</a>
                  </li>
                  <li>
                    <a href="#1371fa6056" class="toc-h2 toc-link" data-title="歴史委員会">歴史委員会</a>
                  </li>
                  <li>
                    <a href="#d826dfe9b8" class="toc-h2 toc-link" data-title="成約记录">成約记录</a>
                  </li>
                  <li>
                    <a href="#9201726cdf" class="toc-h2 toc-link" data-title="注文詳細">注文詳細</a>
                  </li>
                  <li>
                    <a href="#4d2de4667c" class="toc-h2 toc-link" data-title="成約明细">成約明细</a>
                  </li>
                  <li>
                    <a href="#9f57de9503" class="toc-h2 toc-link" data-title="最新の成約明细">最新の成約明细</a>
                  </li>
                  <li>
                    <a href="#32ac26a979" class="toc-h2 toc-link" data-title="スポット請求書を確認する">スポット請求書を確認する</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#apikey-3" class="toc-h1 toc-link" data-title="資金移動 (ApiKey が必要)">資金移動 (ApiKey が必要)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#683a5e7056" class="toc-h2 toc-link" data-title="ウォレットをスポットに転送する">ウォレットをスポットに転送する</a>
                  </li>
                  <li>
                    <a href="#3f25c09cb8" class="toc-h2 toc-link" data-title="マーケットデータを購読する">マーケットデータを購読する</a>
                  </li>
                  <li>
                    <a href="#761dfdbc06" class="toc-h2 toc-link" data-title="深度データを購読する">深度データを購読する</a>
                  </li>
                  <li>
                    <a href="#b19e59c315" class="toc-h2 toc-link" data-title="取引データを購読する">取引データを購読する</a>
                  </li>
                  <li>
                    <a href="#ticker-2" class="toc-h2 toc-link" data-title="订阅 Ticker 数据">订阅 Ticker 数据</a>
                  </li>
                  <li>
                    <a href="#b16a0fda36" class="toc-h2 toc-link" data-title="订阅用户数据方法">订阅用户数据方法</a>
                  </li>
                  <li>
                    <a href="#e21415eb1a" class="toc-h2 toc-link" data-title="通貨資産のサブスクリプションユーザーデータ分析">通貨資産のサブスクリプションユーザーデータ分析</a>
                  </li>
                  <li>
                    <a href="#0969976190" class="toc-h2 toc-link" data-title="通貨注文のユーザーデータ分析を購読する">通貨注文のユーザーデータ分析を購読する</a>
                  </li>
                  <li>
                    <a href="#566ec1f766" class="toc-h2 toc-link" data-title="通貨協定の詳細の加入者データ分析">通貨協定の詳細の加入者データ分析</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#044106d39a" class="toc-h2 toc-link" data-title="エラーコード">エラーコード</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.trade-planets.com'>取引を開始する</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='api'>API導入</h1><h2 id='6cb2d1cdf8'>署名インターフェイスのリクエストメソッド</h2>
<blockquote>
<p>完全な例</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> <span class="c1">// 1.現在のタイムスタンプ</span>

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 2.リクエストパラメータ</span>
    <span class="na">select</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> <span class="c1">// 2.フォーマットパラメータ</span>

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> <span class="c1">// 3.これは署名が必要な文字列です</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// your apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// apikeyのパスワード</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="c1">// 4.サイン後の結果</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/assets/main</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>   <span class="c1">// リクエストパス</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>     <span class="c1">// リクエスト方法</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>  <span class="c1">// 5.リクエストヘッダーを設定する</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">getopt</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/assets/main'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>

    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/assets/main"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>

             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li><p>1.現在のタイムスタンプのタイムスタンプを取得します</p></li>
<li><p>2.インターフェースリクエストに必要なパラメータparamを理解し、strParamを取得するようにパラメータをフォーマットする</p></li>
<li><p>3.署名が必要な文字列 strToSign を生成します。</p></li>
<li><p>4.apikey のパスワード シークレットを使用して、署名が必要な文字列 strToSign に対して HmacMD5 暗号化署名を実行します。</p></li>
<li><p>5.リクエスト時にhttpヘッダーの以下のフィールドを設定します</p></li>
</ul>

<table><thead>
<tr>
<th>字段名</th>
<th>タイプ</th>
<th>説明する</th>
<th>取值</th>
</tr>
</thead><tbody>
<tr>
<td>content-type</td>
<td>string</td>
<td></td>
<td>&#39;application/json&#39;</td>
</tr>
<tr>
<td>api-key</td>
<td>string</td>
<td>apikey</td>
<td></td>
</tr>
<tr>
<td>api-timestamp</td>
<td>long</td>
<td>現在のタイムスタンプ (ミリ秒)</td>
<td>timestamp</td>
</tr>
<tr>
<td>api-sign</td>
<td>string</td>
<td>署名結果</td>
<td>sign</td>
</tr>
</tbody></table>

<ul>
<li><p>6.リクエスト時、http bodyに整形したリクエストパラメータstrParamを設定します。</p></li>
<li><p>7.戻り値にはフィールドの状態が含まれ、0 は成功を示し、その他のエラー コードは失敗を示します。 成功した結果には対応するフィールド result が含まれ、失敗した結果には対応するフィールド msg が含まれます。</p></li>
</ul>
<h2 id='810d45e4da'>ネットワークテスト</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/ping</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/ping'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/ping"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/ping</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="mi">1604319540420</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>サーバーのタイムスタンプ</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h1 id='b26ab813ed'>市場</h1><h2 id='617ae03773'>取引ペアのクエリ</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/pairList</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span> 


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/pairList'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/pairList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/pairList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"DOGE_BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"decimal"</span><span class="p">:</span><span class="mi">8</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"DOGE_ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"decimal"</span><span class="p">:</span><span class="mi">8</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>取引ペアid</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペアsymbol</td>
</tr>
<tr>
<td>decimal</td>
<td>価格の正確性</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='k'>クエリ K 行</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/kline?pair=BTC_USDT&amp;period=1min&amp;size=2</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/kline?pair=BTC_USDT&amp;period=1min&amp;size=2'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/kline?pair=BTC_USDT&amp;period=1min&amp;size=2"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/kline?pair=BTC_USDT&amp;period=1min&amp;size=10</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>kライン周期</td>
<td></td>
<td>&#39;1min&#39;, &#39;3min&#39;, &#39;5min&#39;, &#39;15min&#39;, &#39;30min&#39;, &#39;1hour&#39;, &#39;2hour&#39;, &#39;4hour&#39;, &#39;6hour&#39;, &#39;12hour&#39;, &#39;day&#39;, &#39;week&#39;</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>量</td>
<td>1000</td>
<td>1-1000</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604319840000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604319900000</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="s2">"11700.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>time</td>
<td>タイムスタンプ</td>
</tr>
<tr>
<td>open</td>
<td>始値</td>
</tr>
<tr>
<td>high</td>
<td>最高価格</td>
</tr>
<tr>
<td>low</td>
<td>最低価格</td>
</tr>
<tr>
<td>close</td>
<td>終値</td>
</tr>
<tr>
<td>vol</td>
<td>成約量</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='b405992e60'>すべての通貨の市場状況を確認する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/marketAll</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/marketAll'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/marketAll"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/marketAll</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"380746.08"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"0.053142"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"change"</span><span class="p">:</span><span class="s2">"+0.000460"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+0.87%"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"0.055248"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"0.052253"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"0.0531"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"vol24H"</span><span class="p">:</span><span class="s2">"7059898"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">90</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high_usd"</span><span class="p">:</span><span class="s2">"0.0552"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low_usd"</span><span class="p">:</span><span class="s2">"0.0522"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
             </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
             </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"392242739.20"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"13328.9300"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"change"</span><span class="p">:</span><span class="s2">"-437.5799"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
             </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"-3.17%"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"13860.2500"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"13213.1600"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
             </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"13318.9290"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"vol24H"</span><span class="p">:</span><span class="s2">"28728"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span><span class="w">
             </span><span class="nl">"high_usd"</span><span class="p">:</span><span class="s2">"13849.8503"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"low_usd"</span><span class="p">:</span><span class="s2">"13203.2459"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>取引ペアid</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>last</td>
<td>24h最新のの価格</td>
</tr>
<tr>
<td>high</td>
<td>24h最高価格</td>
</tr>
<tr>
<td>low</td>
<td>24h最低価格</td>
</tr>
<tr>
<td>change</td>
<td>24h浮き沈み</td>
</tr>
<tr>
<td>percent</td>
<td>24h見積変更</td>
</tr>
<tr>
<td>vol24H</td>
<td>24h成約量</td>
</tr>
<tr>
<td>amount</td>
<td>24h成約额</td>
</tr>
<tr>
<td>last_usd</td>
<td>24h最新のの価格換算usd</td>
</tr>
<tr>
<td>high_usd</td>
<td>24h最高価格換算usd</td>
</tr>
<tr>
<td>low_usd</td>
<td>24h最安値換算usd</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='df37d856e6'>単一通貨の市場状況をクエリする</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/market?pair=DOGE_USDT</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/market?pair=DOGE_USDT'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/market?pair=DOGE_USDT"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/market?pair=DOGE_USDT</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"is_hide"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"380746.08"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"0.053142"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="s2">"+0.000460"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"area_id"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"+0.87%"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"0.055248"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"0.052253"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pair_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"0.0531"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol24H"</span><span class="p">:</span><span class="s2">"7059898"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">90</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high_usd"</span><span class="p">:</span><span class="s2">"0.0552"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low_usd"</span><span class="p">:</span><span class="s2">"0.0522"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>取引ペアid</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>last</td>
<td>24h最新のの価格</td>
</tr>
<tr>
<td>high</td>
<td>24h最高価格</td>
</tr>
<tr>
<td>low</td>
<td>24h最低価格</td>
</tr>
<tr>
<td>change</td>
<td>24h浮き沈み</td>
</tr>
<tr>
<td>percent</td>
<td>24h見積変更</td>
</tr>
<tr>
<td>vol24H</td>
<td>24h成約量</td>
</tr>
<tr>
<td>amount</td>
<td>24h成約额</td>
</tr>
<tr>
<td>last_usd</td>
<td>24h最新のの価格換算usd</td>
</tr>
<tr>
<td>high_usd</td>
<td>24h最高価格換算usd</td>
</tr>
<tr>
<td>low_usd</td>
<td>24h最安値換算usd</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='25e63fc590'>市場の厚みを確認する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/depth?pair=BTC_USDT&amp;size=2</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/depth?pair=BTC_USDT&amp;size=2'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/depth?pair=BTC_USDT&amp;size=2"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/depth?pair=DOGE_BTC&amp;size=10</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>量</td>
<td>200</td>
<td>1-200</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"update_time"</span><span class="p">:</span><span class="mi">1604316939377</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"0.00320000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11739.1407"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"0.00320000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11762.6189"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"0.00640000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11692.3246"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"0.00490000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11668.9866"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペア</td>
</tr>
<tr>
<td>update_time</td>
<td>タイムスタンプ</td>
</tr>
<tr>
<td>asks</td>
<td>売り手の深さ</td>
</tr>
<tr>
<td>bids</td>
<td>購入者の深さ</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>volume</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='ece7ea71a1'>契約記録の照会</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/deals?pair=BTC_USDT&amp;size=2</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/deals?pair=BTC_USDT&amp;size=2'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/deals?pair=BTC_USDT&amp;size=2"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/deals?pair=BTC_USDT&amp;size=10</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>size</td>
<td>false</td>
<td>integer</td>
<td>量</td>
<td>200</td>
<td>1-200</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11700.0000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.01000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604316939377</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"BTC_USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"11857.0026"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.00160000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time"</span><span class="p">:</span><span class="mi">1604308219643</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペア</td>
</tr>
<tr>
<td>price</td>
<td>成約価格</td>
</tr>
<tr>
<td>volume</td>
<td>成約量</td>
</tr>
<tr>
<td>time</td>
<td>成約時間</td>
</tr>
<tr>
<td>side</td>
<td>taker成約方向，1-購入、2-販売</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='ticker'>市場をチェックするticker</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/mudata/ticker?pair=BTC_USDT</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/mudata/ticker?pair=BTC_USDT'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/mudata/ticker?pair=BTC_USDT"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/mudata/ticker?pair=BTC_USDT</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"BTC_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last"</span><span class="p">:</span><span class="s2">"11700.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_usd"</span><span class="p">:</span><span class="s2">"11700.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"11880.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"11700.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"buy"</span><span class="p">:</span><span class="s2">"11692.3246"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="s2">"0.00640000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sell"</span><span class="p">:</span><span class="s2">"11739.1407"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="s2">"0.00320000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="s2">"0.02160000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"percent"</span><span class="p">:</span><span class="s2">"-1.51%"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1604316939377</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペアsymbol</td>
</tr>
<tr>
<td>buy</td>
<td>最新のの購入価格</td>
</tr>
<tr>
<td>buy_amount</td>
<td>一つ買う量</td>
</tr>
<tr>
<td>sell</td>
<td>最新の1つ売る价</td>
</tr>
<tr>
<td>sell_amount</td>
<td>1つ売る量</td>
</tr>
<tr>
<td>high</td>
<td>24h最高価格</td>
</tr>
<tr>
<td>last</td>
<td>最新の成約価格</td>
</tr>
<tr>
<td>low</td>
<td>24h最低価格</td>
</tr>
<tr>
<td>timestamp</td>
<td>タイムスタンプ</td>
</tr>
<tr>
<td>vol</td>
<td>24h成約量</td>
</tr>
<tr>
<td>percent</td>
<td>24h見積変更</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='a45ac5562e'>注文制限情報</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderpending/tradeLimit</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">requests</span>


<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderpending/tradeLimit'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="n">String</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderpending/tradeLimit"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>GET https://api.trade-planets.com/api/v1/so/orderpending/tradeLimit</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"min_trade_price"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="s2">"0.00000001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"USDT"</span><span class="p">:</span><span class="s2">"0.0001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"DAI"</span><span class="p">:</span><span class="s2">"0.0001"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"min_trade_amount"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="s2">"0.0001"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"min_trade_money"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"USDT"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"DAI"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"GUSD"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"DOGE"</span><span class="p">:</span><span class="s2">"3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"BTC"</span><span class="p">:</span><span class="s2">"0.0002"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ETH"</span><span class="p">:</span><span class="s2">"0.005"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>min_trade_price</td>
<td>最低注文価格</td>
</tr>
<tr>
<td>- default</td>
<td>通常フェッチペアの最低注文価格制限0.00000001</td>
</tr>
<tr>
<td>- USDT</td>
<td>USDT 取引エリアの最小注文価格制限は 0.0001 です。0.0001 を超える小数部分は自動的に切り捨てられ、USDT で価格設定されたすべての出金に適用されます</td>
</tr>
<tr>
<td>- DAI</td>
<td>DAI 取引エリアの最小注文価格制限は 0.0001 です。0.0001 を超える小数部分は自動的に切り捨てられ、DAI で価格設定されたすべての出金に適用されます。</td>
</tr>
<tr>
<td>min_trade_amount</td>
<td>最小注文数量</td>
</tr>
<tr>
<td>- default</td>
<td>最小注文制限は 0.0001 で、0.0001 を超える小数部分は自動的に切り捨てられます，适用于所有取引ペア</td>
</tr>
<tr>
<td>min_trade_money</td>
<td>最低注文金額</td>
</tr>
<tr>
<td>- USDT</td>
<td>USDT 取引エリアの最小注文金額制限は 1 などです</td>
</tr>
</tbody></table>
<h1 id='apikey'>アセット情報 (ApiKey が必要)</h1><h2 id='6090d19d71'>ウォレットアカウントの資産</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/assets/main</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">select</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">getopt</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/assets/main'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>

    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/assets/main"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>

             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/assets/main</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>select</td>
<td>false</td>
<td>integer</td>
<td>資産の詳細を照会するかどうか</td>
<td></td>
<td>0-各通貨の資産合計、1-すべての通貨の資産の詳細を要求</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"total_btc"</span><span class="p">:</span><span class="s2">"0.01373280"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_usd"</span><span class="p">:</span><span class="s2">"188.63"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"assets_list"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"BTCValue"</span><span class="p">:</span><span class="s2">"0.00149188"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"USDValue"</span><span class="p">:</span><span class="s2">"20.49"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"0.00149188"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"BTCValue"</span><span class="p">:</span><span class="s2">"0.00098407"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"USDValue"</span><span class="p">:</span><span class="s2">"13.52"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"247.87570000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>total_btc</td>
<td>各通貨の総資産、BTC での価格</td>
</tr>
<tr>
<td>total_usd</td>
<td>各通貨の総資産、USD での価格</td>
</tr>
<tr>
<td>assets_list</td>
<td>通貨資産リスト</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨</td>
</tr>
<tr>
<td>balance</td>
<td>利用可能なアセット</td>
</tr>
<tr>
<td>freeze</td>
<td>資産を凍結する</td>
</tr>
<tr>
<td>BTCValue</td>
<td>BTCの評価</td>
</tr>
<tr>
<td>USDValue</td>
<td>USDの評価</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='10737e2b9d'>スポットアカウント資産</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/st/account/assets</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">select</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/st/account/assets'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'select'</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/st/account/assets"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="k">select</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/st/account/assets</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>select</td>
<td>false</td>
<td>integer</td>
<td>資産の詳細をクエリするかどうか</td>
<td></td>
<td>0 - 各通貨の総資産合計、1 - すべての通貨資産の詳細を要求</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"total_btc"</span><span class="p">:</span><span class="s2">"0.01373280"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_usd"</span><span class="p">:</span><span class="s2">"188.63"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"assets_list"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"BTCValue"</span><span class="p">:</span><span class="s2">"0.00149188"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"USDValue"</span><span class="p">:</span><span class="s2">"20.49"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"0.00149188"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"BTCValue"</span><span class="p">:</span><span class="s2">"0.00098407"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"USDValue"</span><span class="p">:</span><span class="s2">"13.52"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"247.87570000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>total_btc</td>
<td>各通貨の資産の合計 (btc で価格設定)</td>
</tr>
<tr>
<td>total_usd</td>
<td>各通貨の資産の合計 (usd で価格設定)</td>
</tr>
<tr>
<td>資産リスト</td>
<td>通貨資産リスト</td>
</tr>
<tr>
<td>コイン記号</td>
<td>通貨</td>
</tr>
<tr>
<td>残高</td>
<td>利用可能な資産</td>
</tr>
<tr>
<td>凍結</td>
<td>資産の凍結</td>
</tr>
<tr>
<td>BTCValue</td>
<td>BTC 評価</td>
</tr>
<tr>
<td>USDValue</td>
<td>USD 評価</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='1a018e4e05'>入金アドレスを取得する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/getAddr</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">coin_symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">getopt</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/getAddr'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'coin_symbol'</span><span class="p">:</span> <span class="s">'BTC'</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/getAddr"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">coin_symbol</span> <span class="p">=</span> <span class="s">"BTC"</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/getAddr</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>coin_symbol</td>
<td>true</td>
<td>string</td>
<td>通貨</td>
<td></td>
<td>DOGE, BTC, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"13f2LpNAdsKuxdTt2bKFLaSZL7toeyieGE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>リチャージアドレス</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='a471daf080'>提现</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/withdraw</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">coin_symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="na">addr</span><span class="p">:</span> <span class="dl">'</span><span class="s1">13f2LpNAdsKuxdTt2bKFLaSZL7toeyieGExxx</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">memo</span><span class="p">:</span> <span class="dl">''</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">getopt</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/withdraw'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'coin_symbol'</span><span class="p">:</span> <span class="s">'BTC'</span><span class="p">,</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="s">'addr'</span><span class="p">:</span> <span class="s">'13f2LpNAdsKuxdTt2bKFLaSZL7toeyieGExxx'</span><span class="p">,</span>
        <span class="s">'memo'</span><span class="p">:</span> <span class="s">''</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/withdraw"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">coin_symbol</span> <span class="p">=</span> <span class="s">"BTC"</span><span class="p">,</span>
                <span class="n">amount</span> <span class="p">=</span> <span class="s">"0.1"</span><span class="p">,</span>
                <span class="n">addr</span> <span class="p">=</span> <span class="s">"13f2LpNAdsKuxdTt2bKFLaSZL7toeyieGExxx"</span><span class="p">,</span>
                <span class="n">memo</span> <span class="p">=</span> <span class="s">""</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/withdraw</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>coin_symbol</td>
<td>true</td>
<td>string</td>
<td>通貨を引き出す</td>
<td></td>
<td>DOGE、BTC、...</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>double</td>
<td>出金金額</td>
<td></td>
<td>各通貨の最低出金額より大きくなければなりません</td>
</tr>
<tr>
<td>addr</td>
<td>true</td>
<td>string</td>
<td>出金アドレス</td>
<td></td>
<td>法定通貨アドレス</td>
</tr>
<tr>
<td>メモ</td>
<td>false</td>
<td>文字列</td>
<td>出金ラベル</td>
<td></td>
<td>一部の通貨の出金ではラベルを指定する必要があり、アドレスと組み合わせると一意になります (EOS など)。</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="mi">228</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>出金id</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='1255247768'>リチャージ記録のクエリ</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/depositList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">coin_symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">filter_type</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/depositList'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'coin_symbol'</span><span class="p">:</span> <span class="s">'USDT'</span><span class="p">,</span>
        <span class="s">'filter_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'size'</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/depositList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">coin_symbol</span> <span class="p">=</span> <span class="s">"USDT"</span><span class="p">,</span>
                <span class="n">filter_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">size</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/depositList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>filter_type</td>
<td>false</td>
<td>integer</td>
<td>充值记录筛选</td>
<td>0</td>
<td>0-全部，1-充值进行中，2-充值到账，3-充值失败</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>充值币种</td>
<td></td>
<td>DOGE, ETH, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>ページあたりの数量</td>
<td></td>
<td>1-50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1682192</span><span class="p">,</span><span class="w">
                </span><span class="nl">"to"</span><span class="p">:</span><span class="s2">"TXLhYFsWu84vU5ngs8J88yphTPdv69zrqoD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tx_id"</span><span class="p">:</span><span class="s2">"a8f77b3a20758d85f71f2d993766c9b6c2daf1b1f34992e409e1a47247e5a5e45"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"chain_type"</span><span class="p">:</span><span class="s2">"TRC20"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"confirmCount"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.00094400"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1596876872000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>1から始まるどのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨</td>
</tr>
<tr>
<td>to_address</td>
<td>入金アドレス</td>
</tr>
<tr>
<td>amount</td>
<td>入金数量</td>
</tr>
<tr>
<td>confirmCount</td>
<td>確認数</td>
</tr>
<tr>
<td>createdAt</td>
<td>入金時間</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、1-入金進行中、2-入金受領、3-入金失敗</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='70150c311e'>出金記録のクエリ</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/withdrawList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">coin_symbol</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">filter_type</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/withdrawList'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'coin_symbol'</span><span class="p">:</span> <span class="s">'USDT'</span><span class="p">,</span>
        <span class="s">'filter_type'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'size'</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/withdrawList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">coin_symbol</span> <span class="p">=</span> <span class="s">"USDT"</span><span class="p">,</span>
                <span class="n">filter_type</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">size</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/withdrawList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>filter_type</td>
<td>false</td>
<td>integer</td>
<td>出金記録のフィルタリング</td>
<td></td>
<td>-2：審査不合格、-1：ユーザー退会、0：審査中、1：審査通過（発行予定）、2：コイン発行中、3：コイン発行完了</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>通貨</td>
<td></td>
<td>DOGE, ETH, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>ページあたりの数量</td>
<td></td>
<td>1-50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">809022</span><span class="p">,</span><span class="w">
                </span><span class="nl">"to_address"</span><span class="p">:</span><span class="s2">"0x606a84A14307418F47C6ad538b5E73C93Ff9C8Cf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tx_id"</span><span class="p">:</span><span class="s2">"0xd3cf26d514c1e62f85de84b4e24fbd219084dd078daa7e639844c33cdf81bd62b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"chain_type"</span><span class="p">:</span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount_real"</span><span class="p">:</span><span class="s2">"1000.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"1003.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1596876972000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"memo"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>1から始まるどのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨</td>
</tr>
<tr>
<td>to_address</td>
<td>出金アドレス</td>
</tr>
<tr>
<td>amount</td>
<td>出金額</td>
</tr>
<tr>
<td>fee</td>
<td>出金手数料</td>
</tr>
<tr>
<td>createdAt</td>
<td>时间</td>
</tr>
<tr>
<td>memo</td>
<td>memo</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、1-進行中、2-出金成功、3-出金失敗、4-出金キャンセル</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='f2a984a5a2'>通貨設定を取得する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/coinConfig</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/coinConfig'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>

    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/coinConfig"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>

             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/coinConfig</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>通貨</td>
<td></td>
<td>DOGE, ETH...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_active"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"original_decimals"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enable_deposit"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"enable_withdraw"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"withdraw_fee"</span><span class="p">:</span><span class="mf">0.0008</span><span class="p">,</span><span class="w">
            </span><span class="nl">"withdraw_min"</span><span class="p">:</span><span class="mf">0.005</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨</td>
</tr>
<tr>
<td>original_decimals</td>
<td>通貨元の値の精度</td>
</tr>
<tr>
<td>enable_deposit</td>
<td>入金許可、0-禁止、1-許可</td>
</tr>
<tr>
<td>enable_withdraw</td>
<td>出金許可、0-禁止、1-許可</td>
</tr>
<tr>
<td>withdraw_fee</td>
<td>出金手数料</td>
</tr>
<tr>
<td>withdraw_min</td>
<td>最低出金額</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='bc4800446c'>特定の出金記録を照会する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/tf/tx/withdrawInfo</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">228</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/tf/tx/withdrawInfo'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="mi">228</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/tf/tx/withdrawInfo"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">id</span> <span class="p">=</span> <span class="m">228</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/tf/tx/withdrawInfo</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td>出金id</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">228</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="mi">1512756997000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"LTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"to_address"</span><span class="p">:</span><span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"1.00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="mf">0.1</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>出金id</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨</td>
</tr>
<tr>
<td>createdAt</td>
<td>出金時間</td>
</tr>
<tr>
<td>to_address</td>
<td>出金アドレス</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-2: 審査不合格、-1: ユーザー取り消し、0: 審査保留、1: 審査合格(コイン発行予定)、2: コイン発行中、3: コイン発行完了</td>
</tr>
<tr>
<td>amount</td>
<td>出金額</td>
</tr>
<tr>
<td>fee</td>
<td>出金手数料</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h1 id='apikey-2'>現物取引（ApiKeyが必要）</h1><h2 id='14982d1b16'>注文する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/spot/order/trade</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">pair</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">order_side</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">order_type</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mf">0.05458</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/spot/order/trade'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'pair'</span><span class="p">:</span> <span class="s">'DOGE_USDT'</span><span class="p">,</span>
        <span class="s">'order_side'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'order_type'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'price'</span><span class="p">:</span> <span class="mf">0.05458</span><span class="p">,</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/spot/order/trade"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"DOGE_USDT"</span><span class="p">,</span>
                <span class="n">order_side</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
                <span class="n">order_type</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span>
                <span class="n">price</span> <span class="p">=</span> <span class="s">"0.05458"</span><span class="p">,</span>
                <span class="n">amount</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/spot/order/trade</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>order_type</td>
<td>true</td>
<td>integer</td>
<td>取引タイプ</td>
<td></td>
<td>2-指値注文</td>
</tr>
<tr>
<td>order_side</td>
<td>true</td>
<td>integer</td>
<td>取引の方向性</td>
<td></td>
<td>1-購入、2-販売</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>double</td>
<td>手数料価格</td>
<td></td>
<td>最小值 0.00000001</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>double</td>
<td>手数料の金額</td>
<td></td>
<td>最小值 0.0001</td>
</tr>
<tr>
<td>client_oid</td>
<td>false</td>
<td>long to string</td>
<td>ユーザー定義のID</td>
<td></td>
<td>&#39;110011223344&#39;</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"12845594488036185"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>order_id</td>
<td>注文ID</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-1 失敗、0 または 1 - 保留中の合意、2 - 部分的な合意、3 - 完全な合意、4 - 部分的な取り消し、5 - 完全な取り消し</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='eb78d07f3b'>注文をキャンセルする</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/spot/order/cancel</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">order_id</span><span class="p">:</span><span class="dl">"</span><span class="s2">12845594488036185</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/spot/order/cancel'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'order_id'</span><span class="p">:</span> <span class="s">"12845594488036185"</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/spot/order/cancel"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">order_id</span> <span class="p">=</span> <span class="s">"12845594488036185"</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/spot/order/cancel</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td>注文ID</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>注: この結果は、サーバーが注文キャンセル要求を受信したことを意味するだけであり、キャンセル結果については注文レコードを照会できます。</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='ead10c07f1'>注文を一括でキャンセルする</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/spot/order/cancelBatch</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">order_ids</span><span class="p">:[</span><span class="dl">"</span><span class="s2">12845594488036185</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">12845594488036186</span><span class="dl">"</span><span class="p">]</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/spot/order/cancelBatch'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'order_ids'</span><span class="p">:</span> <span class="p">[</span><span class="s">"12845594488036185"</span><span class="p">,</span><span class="s">"12845594488036186"</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/spot/order/cancelBatch"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">order_ids</span> <span class="p">=</span> <span class="k">new</span> <span class="p">[]</span> <span class="p">{</span><span class="s">"12845594488036185"</span><span class="p">,</span> <span class="s">"12845594488036186"</span><span class="p">},</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/spot/order/cancelBatch</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>order_ids</td>
<td>true</td>
<td>string array</td>
<td>注文ID配列</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>注: この結果は、サーバーが注文キャンセル要求を受信したことを意味するだけであり、キャンセル結果については注文レコードを照会できます。</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='32fa02b6a5'>すべての注文をキャンセルする</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/spot/order/cancelAll</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">pair</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTC_USDT</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/spot/order/cancelAll'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"pair"</span><span class="p">:</span> <span class="s">"BTC_USDT"</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/spot/order/cancelAll"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"BTC_USDT"</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/spot/order/cancelAll</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>result</td>
<td>注: この結果は、サーバーが注文キャンセル要求を受信したことを意味するだけであり、キャンセル結果については注文レコードを照会できます。</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='5267b1a751'>現在の注文</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderPendingList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">pair</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderPendingList'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'pair'</span><span class="p">:</span> <span class="s">'DOGE_USDT'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'size'</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderPendingList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"DOGE_USDT"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">size</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/orderPendingList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
<tr>
<td>order_side</td>
<td>false</td>
<td>integer</td>
<td>取引の方向性</td>
<td></td>
<td>1-購入、2-販売</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>取引通貨</td>
<td></td>
<td>DOGE, EOS, ...</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>false</td>
<td>string</td>
<td>価格設定通貨</td>
<td></td>
<td>BTC, USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>ページあたりの数量</td>
<td></td>
<td>1-50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"12874181782731851"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604309861000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"DOGE_USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.054330"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"0.000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"5.43300000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_amount"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_percent"</span><span class="p">:</span><span class="s2">"0.00%"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_money"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"unexecuted"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名称</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>1から始まるどのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>client_oid</td>
<td>ユーザー定義のID</td>
</tr>
<tr>
<td>createdAt</td>
<td>作成時間</td>
</tr>
<tr>
<td>account_type</td>
<td>0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>amount</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>money</td>
<td>預けた金額</td>
</tr>
<tr>
<td>deal_amount</td>
<td>成約量</td>
</tr>
<tr>
<td>deal_price</td>
<td>成約平均の値段</td>
</tr>
<tr>
<td>deal_percent</td>
<td>トランザクションの割合</td>
</tr>
<tr>
<td>deal_count</td>
<td>成約件数</td>
</tr>
<tr>
<td>unexecuted</td>
<td>未解決</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-1 失敗、0 または 1 - 保留中の合意、2 - 部分的な合意、3 - 完全な合意、4 - 部分的な取り消し、5 - 完全な取り消し</td>
</tr>
<tr>
<td>order_from</td>
<td>注文元</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='1371fa6056'>歴史委員会</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/pendingHistoryList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">pair</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/pendingHistoryList'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'pair'</span><span class="p">:</span> <span class="s">'DOGE_USDT'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'size'</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/pendingHistoryList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"DOGE_USDT"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">size</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/pendingHistoryList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
<tr>
<td>order_side</td>
<td>false</td>
<td>integer</td>
<td>取引の方向性</td>
<td></td>
<td>1-購入、2-販売</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>取引通貨</td>
<td></td>
<td>DOGE, EOS, ...</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>false</td>
<td>string</td>
<td>価格設定通貨</td>
<td></td>
<td>BTC, USDT, ...</td>
</tr>
<tr>
<td>hide_cancel</td>
<td>false</td>
<td>integer</td>
<td>キャンセルされた注文を非表示にする</td>
<td></td>
<td>0 - 非表示、1 - 非表示</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>ページあたりの数量</td>
<td></td>
<td>1-50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"12845594488036185"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604305967000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.054580"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"5.45800000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"0.000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_amount"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deal_money"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">5</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>1から始まるどのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>createdAt</td>
<td>作成時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>amount</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>money</td>
<td>預けた金額</td>
</tr>
<tr>
<td>deal_price</td>
<td>成約平均の値段</td>
</tr>
<tr>
<td>deal_amount</td>
<td>成約量</td>
</tr>
<tr>
<td>deal_money</td>
<td>成約额</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-1 失敗、0 または 1 - 保留中の合意、2 - 部分的な合意、3 - 完全な合意、4 - 部分的な取り消し、5 - 完全な取り消し</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='d826dfe9b8'>成約记录</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderDetail</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12826902662624234</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderDetail'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'12826902662624234'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderDetail"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">id</span> <span class="p">=</span> <span class="s">"12826902662624234"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/orderDetail</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>string</td>
<td>注文ID</td>
<td></td>
<td></td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"sum"</span><span class="p">:</span><span class="s2">"3.57490350"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderList"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799823470863898"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1599730918000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.071300"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.4825"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"0.03440225"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12826902662624234"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799823470863900"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1599730918000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.071500"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"39.8408"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"2.84861720"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12826902662624234"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799823470863902"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1599730918000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.071500"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"9.6767"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"0.69188405"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12826902662624234"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>sum</td>
<td>成約总额</td>
</tr>
<tr>
<td>orderList</td>
<td>成約レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>成約记录id</td>
</tr>
<tr>
<td>createdAt</td>
<td>成約時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>成約価格</td>
</tr>
<tr>
<td>amount</td>
<td>成約量</td>
</tr>
<tr>
<td>money</td>
<td>成約额</td>
</tr>
<tr>
<td>fee_symbol</td>
<td>手数料通貨</td>
</tr>
<tr>
<td>fee</td>
<td>手数料</td>
</tr>
<tr>
<td>is_maker</td>
<td>メーカーになるかどうか、0-いいえ、1-はい</td>
</tr>
<tr>
<td>relay_id</td>
<td>关联注文ID</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='9201726cdf'>注文詳細</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderpending/order</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12845594488036185</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderpending/order'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'12845594488036185'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderpending/order"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">id</span> <span class="p">=</span> <span class="s">"12845594488036185"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/orderpending/order</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>string</td>
<td>注文ID</td>
<td></td>
<td></td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"12845594488036185"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604305967000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"DOGE_USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.054580"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"0.000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"5.45800000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"deal_amount"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"deal_percent"</span><span class="p">:</span><span class="s2">"0.00%"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"deal_money"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"unexecuted"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>createdAt</td>
<td>作成時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペア</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>amount</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>money</td>
<td>預けた金額</td>
</tr>
<tr>
<td>deal_amount</td>
<td>已成約量</td>
</tr>
<tr>
<td>deal_percent</td>
<td>トランザクションの割合</td>
</tr>
<tr>
<td>unexecuted</td>
<td>未成約量</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-1 失敗、0 または 1 - 保留中の合意、2 - 部分的な合意、3 - 完全な合意、4 - 部分的な取り消し、5 - 完全な取り消し</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='4d2de4667c'>成約明细</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderHistoryList</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">pair</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderHistoryList'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'pair'</span><span class="p">:</span> <span class="s">'DOGE_USDT'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'size'</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderHistoryList"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"DOGE_USDT"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">size</span> <span class="p">=</span> <span class="m">10</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/orderHistoryList</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
<tr>
<td>order_side</td>
<td>false</td>
<td>integer</td>
<td>取引の方向性</td>
<td></td>
<td>1-購入、2-販売</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>false</td>
<td>string</td>
<td>取引通貨</td>
<td></td>
<td>DOGE, EOS, ...</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>false</td>
<td>string</td>
<td>価格設定通貨</td>
<td></td>
<td>BTC, USDT, ...</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>ページあたりの数量</td>
<td></td>
<td>1-50</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799823470863902"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1599730918000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.071500"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"9.6767"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"0.69188405"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12826902662624234"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>どのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>createdAt</td>
<td>成約時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>成約価格</td>
</tr>
<tr>
<td>amount</td>
<td>成約量</td>
</tr>
<tr>
<td>money</td>
<td>成約额</td>
</tr>
<tr>
<td>fee</td>
<td>手数料</td>
</tr>
<tr>
<td>fee_symbol</td>
<td>手数料通貨</td>
</tr>
<tr>
<td>is_maker</td>
<td>是否maker</td>
</tr>
<tr>
<td>relay_id</td>
<td>关联注文ID</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='9f57de9503'>最新の成約明细</h2>
<p>指定された ID 番号以降の契約レコードをクエリし、ページングで 1000 レコードを返します。</p>

<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/api/v1/so/orderpending/orderDetailsLast</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">pair</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_USDT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">account_type</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">id</span><span class="p">:</span><span class="dl">"</span><span class="s2">2251799823470863900</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">cmd</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_request</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/api/v1/so/orderpending/orderDetailsLast'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'pair'</span><span class="p">:</span> <span class="s">'DOGE_USDT'</span><span class="p">,</span>
        <span class="s">'account_type'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">"2251799823470863900"</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_request</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
               <span class="p">{</span>
                   <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
                   <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
                   <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                   <span class="p">{</span>
                       <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
                   <span class="p">}</span>

                   <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

                   <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
               <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/api/v1/so/orderpending/orderDetailsLast"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">pair</span> <span class="p">=</span> <span class="s">"DOGE_USDT"</span><span class="p">,</span>
                <span class="n">account_type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">page</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
                <span class="n">id</span> <span class="p">=</span> <span class="s">"2251799823470863900"</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/so/orderpending/orderDetailsLast</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>false</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, ETH_BTC, ...</td>
</tr>
<tr>
<td>account_type</td>
<td>true</td>
<td>integer</td>
<td>口座の種類</td>
<td></td>
<td>0-スポットアカウント</td>
</tr>
<tr>
<td>id</td>
<td>true</td>
<td>string</td>
<td>予定の記録が始まる ID 番号</td>
<td></td>
<td>「1000000000」より大きい</td>
</tr>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,...</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799823470863902"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1599730918000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.071500"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"9.6767"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"0.69188405"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12826902662624234"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799825448005865"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604312287000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.054330"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"5.43300000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12874181782731851"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>どのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>createdAt</td>
<td>成約時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>成約価格</td>
</tr>
<tr>
<td>amount</td>
<td>成約量</td>
</tr>
<tr>
<td>money</td>
<td>成約额</td>
</tr>
<tr>
<td>fee_symbol</td>
<td>手数料通貨</td>
</tr>
<tr>
<td>fee</td>
<td>手数料</td>
</tr>
<tr>
<td>is_maker</td>
<td>メーカーになるかどうか、0-いいえ、1-はい</td>
</tr>
<tr>
<td>relay_id</td>
<td>关联注文ID</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='32ac26a979'>スポット請求書を確認する</h2>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/api/v1/st/account/bills</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>true</td>
<td>integer</td>
<td>どのページ</td>
<td></td>
<td>1,2,...</td>
</tr>
<tr>
<td>size</td>
<td>true</td>
<td>integer</td>
<td>幾つか</td>
<td></td>
<td>1,2,...</td>
</tr>
<tr>
<td>begin_time</td>
<td>false</td>
<td>integer</td>
<td>開始時間</td>
<td></td>
<td></td>
</tr>
<tr>
<td>end_time</td>
<td>false</td>
<td>integer</td>
<td>終了時間</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>integer</td>
<td>账单タイプ</td>
<td></td>
<td>130 ウォレットからスポット、131 スポットからウォレット 3 売り 5 買い</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
     </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"1125899906850284004"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bill_type"</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span><span class="w">
                </span><span class="nl">"comment"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"change_amount"</span><span class="p">:</span><span class="s2">"6.9553"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"change_result"</span><span class="p">:</span><span class="s2">"182461.2621"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2020-11-23T00:00:00.000Z"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2020-11-23T00:00:00.000Z"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>請求書ID</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>通貨符号</td>
</tr>
<tr>
<td>bill_type</td>
<td>請求書タイプ</td>
</tr>
<tr>
<td>comment</td>
<td>請求書説明する</td>
</tr>
<tr>
<td>change_amount</td>
<td>資産変動額</td>
</tr>
<tr>
<td>change_result</td>
<td>資産変更結果</td>
</tr>
<tr>
<td>createdAt</td>
<td>請求時間</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h1 id='apikey-3'>資金移動 (ApiKey が必要)</h1><h2 id='683a5e7056'>ウォレットをスポットに転送する</h2>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span> 

<span class="kd">let</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">strParam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span> 

<span class="kd">let</span> <span class="nx">strToSign</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">strParam</span><span class="p">;</span> 

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">"</span><span class="p">;</span> 
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">strToSign</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://api.trade-planets.com/v3/assets/transfer/spot</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">apikey</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-sign</span><span class="dl">'</span><span class="p">:</span> <span class="nx">sign</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">api-timestamp</span><span class="dl">'</span><span class="p">:</span> <span class="nx">timestamp</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">strParam</span> 
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">optionalCallback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">httpResponse</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">upload failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> 

    <span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">'https://api.trade-planets.com'</span>  


<span class="k">def</span> <span class="nf">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="c1"># to_sign = str(timestamp)+json.dumps(body,separators=(',',':'))
</span>    <span class="n">to_sign</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span> <span class="o">+</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SECRET_KEY</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">to_sign</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s">'api-sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'api-timestamp'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">headers</span>


<span class="k">def</span> <span class="nf">do_reqeust</span><span class="p">():</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/v3/assets/transfer/spot'</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"type"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s">"amount"</span><span class="p">:</span> <span class="s">"100"</span><span class="p">,</span>
        <span class="s">"symbol"</span><span class="p">:</span> <span class="s">'USDT'</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">do_sign</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">do_reqeust</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ConsoleProgram</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Class1</span>
    <span class="p">{</span>

        <span class="c1">// HttpClient is intended to be instantiated once per application, rather than per-use. See Remarks.</span>
        <span class="k">static</span> <span class="k">readonly</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetTimeStamp</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">TimeSpan</span> <span class="n">ts</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToInt64</span><span class="p">(</span><span class="n">ts</span><span class="p">.</span><span class="n">TotalMilliseconds</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
           <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
           <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

           <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
           <span class="p">{</span>
               <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
           <span class="p">}</span>

           <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

           <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
       <span class="p">}</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="c1">// Call asynchronous network methods in a try/catch block to handle exceptions.</span>
          <span class="k">try</span>
          <span class="p">{</span>
             <span class="kt">string</span> <span class="n">uri</span> <span class="p">=</span> <span class="s">"https://api.trade-planets.com/v3/assets/transfer/spot"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

             <span class="kt">string</span> <span class="n">timestamp</span> <span class="p">=</span> <span class="nf">GetTimeStamp</span><span class="p">();</span>
             <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
                <span class="n">type</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
                <span class="n">amount</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">,</span>
                <span class="n">symbol</span> <span class="p">=</span> <span class="s">"USDT"</span><span class="p">,</span>
             <span class="p">};</span>

             <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

             <span class="kt">string</span> <span class="n">source</span> <span class="p">=</span> <span class="n">timestamp</span> <span class="p">+</span> <span class="n">payload</span><span class="p">;</span>
             <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">sign</span><span class="p">);</span>

             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-key"</span><span class="p">,</span> <span class="n">apikey</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-sign"</span><span class="p">,</span> <span class="n">sign</span><span class="p">);</span>
             <span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"api-timestamp"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">);</span>

             <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>

             <span class="n">HttpResponseMessage</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
             <span class="n">response</span><span class="p">.</span><span class="nf">EnsureSuccessStatusCode</span><span class="p">();</span>
             <span class="kt">string</span> <span class="n">responseBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span>

             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">responseBody</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">catch</span><span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">e</span><span class="p">)</span>
          <span class="p">{</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nException Caught!"</span><span class="p">);</span>
             <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Message :{0} "</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>POST https://api.trade-planets.com/v3/assets/transfer/spot</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>true</td>
<td>string</td>
<td>通貨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>string</td>
<td>量</td>
<td></td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>int</td>
<td>コインを転送するウォレットが 0 個、ウォレットにコインが 1 個あります</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">

</span></code></pre></div>
<ul>
<li>1.サブスクリプションパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>取引ペア，BTC_USDT, ETH_USDT</td>
</tr>
<tr>
<td>period</td>
<td>true</td>
<td>string</td>
<td>kライン周期</td>
<td></td>
<td>1min, 5min, 15min, 30min, 1hour, 2hour, 4hour, 6hour, 12hour, day, week</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>${pair} + &#39;_kline_&#39; + ${period}</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"BTC_USDT_kline_1min"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:[</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"1646705760000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38337.1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38356.0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38303.5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38309.2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"2.180836"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"1646705820000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38309.1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38356.6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38309.1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"38355.3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"2.103583"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<p>[
Kラインの一定期間の開始時刻、
始値、
最高価格、
最低価格、
終値、
成約量
]</p>
<h2 id='3f25c09cb8'>マーケットデータを購読する</h2>
<blockquote>
<p>完全な例</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tradeplanetws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.trade-planets.com</span><span class="dl">'</span><span class="p">;</span>


<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">data1</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ALL_ALL_market</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># /usr/bin/env python
# -*- coding: UTF-8 -*-
</span>
<span class="kn">import</span> <span class="nn">websocket</span> <span class="c1"># websocket-client
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">zlib</span>

<span class="n">ws_url</span> <span class="o">=</span> <span class="s">'wss://push.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'ALL_ALL_market'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unsub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'unsub'</span><span class="p">:</span> <span class="s">'ALL_ALL_market'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x01</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">zlib</span><span class="p">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">zlib</span><span class="p">.</span><span class="n">MAX_WBITS</span> <span class="o">|</span> <span class="mi">32</span><span class="p">)</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x00</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># print(message)
</span>    <span class="n">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"### closed ###"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_open</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">get_sub_str</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
    <span class="n">websocket</span><span class="p">.</span><span class="n">enableTrace</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">websocket</span><span class="p">.</span><span class="n">WebSocketApp</span><span class="p">(</span><span class="n">ws_url</span><span class="p">,</span>
                                <span class="n">on_message</span><span class="o">=</span><span class="n">on_message</span><span class="p">,</span>
                                <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
                                <span class="n">on_close</span><span class="o">=</span><span class="n">on_close</span><span class="p">)</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="n">on_open</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">run_forever</span><span class="p">(</span><span class="n">ping_interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ping_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">connect</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WebSocketSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO.Compression</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Example</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

  <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
  <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Decompress</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MemoryStream</span> <span class="n">msIn</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">MemoryStream</span> <span class="n">msOut</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">();</span>

        <span class="n">GZipStream</span> <span class="n">cprs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GZipStream</span><span class="p">(</span><span class="n">msIn</span><span class="p">,</span> <span class="n">CompressionMode</span><span class="p">.</span><span class="n">Decompress</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">CopyTo</span><span class="p">(</span><span class="n">msOut</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">msOut</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span><span class="c1">//通常の文字列に変換する</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">string</span> <span class="n">wsuri</span> <span class="p">=</span> <span class="s">"wss://push.trade-planets.com"</span><span class="p">;</span>
      <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">ws</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WebSocket</span> <span class="p">(</span><span class="n">wsuri</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ws</span><span class="p">.</span><span class="n">OnMessage</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"recv: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsText</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"data[0]: {"</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsBinary</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 1"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="nf">Decompress</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 0"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">};</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Connect</span> <span class="p">();</span>

        <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"ALL_ALL_market"</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Send</span> <span class="p">(</span><span class="n">payload</span><span class="p">);</span>

        <span class="n">ConsoleKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">do</span>
    <span class="err">　　</span><span class="p">{</span>
    <span class="err">　　</span>      <span class="n">key</span><span class="p">=</span><span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
    <span class="err">　　</span>
    <span class="err">　　</span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">key</span> <span class="p">!=</span> <span class="n">ConsoleKey</span><span class="p">.</span><span class="n">Q</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.サブスクリプションパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>sub</td>
<td>true</td>
<td>String</td>
<td></td>
<td></td>
<td>&#39;ALL_ALL_market&#39;</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"ALL_ALL_market"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:[</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"858"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"AXS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"46.670500"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"50.185800"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"45.701500"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"-0.768700"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"-1.62%"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"51042"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"2416310.31"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"CPC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0.00000210"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0.00000211"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0.00000173"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"+0.00000000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"+0.00%"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"12173798"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"25.48"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<p>[
取引ペアid,
忘れる,
忘れる,
忘れる,
取引通貨,
価格設定通貨,
24h最新の价,
24h最高価格,
24h最低価格,
24h浮き沈み,
24h見積変更,
24h成約量,
24h成約额,
]</p>
<h2 id='761dfdbc06'>深度データを購読する</h2>
<blockquote>
<p>完全な例</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tradeplanetws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.trade-planets.com</span><span class="dl">'</span><span class="p">;</span>


<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">data1</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DOGE_BTC_depth</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># /usr/bin/env python
# -*- coding: UTF-8 -*-
</span>
<span class="kn">import</span> <span class="nn">websocket</span> <span class="c1"># websocket-client
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">zlib</span>

<span class="n">ws_url</span> <span class="o">=</span> <span class="s">'wss://push.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'BTC_USDT_depth'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unsub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'unsub'</span><span class="p">:</span> <span class="s">'BTC_USDT_depth'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x01</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">zlib</span><span class="p">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">zlib</span><span class="p">.</span><span class="n">MAX_WBITS</span> <span class="o">|</span> <span class="mi">32</span><span class="p">)</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x00</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># print(message)
</span>    <span class="n">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"### closed ###"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_open</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">get_sub_str</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
    <span class="n">websocket</span><span class="p">.</span><span class="n">enableTrace</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">websocket</span><span class="p">.</span><span class="n">WebSocketApp</span><span class="p">(</span><span class="n">ws_url</span><span class="p">,</span>
                                <span class="n">on_message</span><span class="o">=</span><span class="n">on_message</span><span class="p">,</span>
                                <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
                                <span class="n">on_close</span><span class="o">=</span><span class="n">on_close</span><span class="p">)</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="n">on_open</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">run_forever</span><span class="p">(</span><span class="n">ping_interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ping_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">connect</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WebSocketSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO.Compression</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Example</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

  <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
  <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Decompress</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MemoryStream</span> <span class="n">msIn</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">MemoryStream</span> <span class="n">msOut</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">();</span>

        <span class="n">GZipStream</span> <span class="n">cprs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GZipStream</span><span class="p">(</span><span class="n">msIn</span><span class="p">,</span> <span class="n">CompressionMode</span><span class="p">.</span><span class="n">Decompress</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">CopyTo</span><span class="p">(</span><span class="n">msOut</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">msOut</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span><span class="c1">//通常の文字列に変換する</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">string</span> <span class="n">wsuri</span> <span class="p">=</span> <span class="s">"wss://push.trade-planets.com"</span><span class="p">;</span>
      <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">ws</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WebSocket</span> <span class="p">(</span><span class="n">wsuri</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ws</span><span class="p">.</span><span class="n">OnMessage</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"recv: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsText</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"data[0]: {"</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsBinary</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 1"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="nf">Decompress</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 0"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">};</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Connect</span> <span class="p">();</span>

        <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"BTC_USDT_depth"</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Send</span> <span class="p">(</span><span class="n">payload</span><span class="p">);</span>

        <span class="n">ConsoleKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">do</span>
    <span class="err">　　</span><span class="p">{</span>
    <span class="err">　　</span>      <span class="n">key</span><span class="p">=</span><span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
    <span class="err">　　</span>
    <span class="err">　　</span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">key</span> <span class="p">!=</span> <span class="n">ConsoleKey</span><span class="p">.</span><span class="n">Q</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.サブスクリプションパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, DOGE_ETH, BTC_USDT, ETH_USDT......</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>${pair} + &#39;_depth&#39;</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"DOGE_USDT_depth"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="s2">"DOGE_USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ut"</span><span class="p">:</span><span class="mi">1646708795071</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seq"</span><span class="p">:</span><span class="mi">2794</span><span class="p">,</span><span class="w">
    </span><span class="nl">"add"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"3957.61"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"0.040961"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"7468.53"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"0.040438"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"10605.08"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"0.040273"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"del"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"9326.05"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"0.041173"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"1309.51"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"0.040411"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>t</td>
<td>0 は全額を表し、1 は増分を表します</td>
</tr>
<tr>
<td>pair</td>
<td>取引ペア</td>
</tr>
<tr>
<td>update_time</td>
<td>タイムスタンプ</td>
</tr>
<tr>
<td>asks</td>
<td>売り手の深さ</td>
</tr>
<tr>
<td>bids</td>
<td>購入者の深さ</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>volume</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='b19e59c315'>取引データを購読する</h2>
<blockquote>
<p>完全な例</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tradeplanetws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.trade-planets.com</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">data1</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">{</span><span class="c1">// kline</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">addChannel</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC_USDT_deals</span><span class="dl">'</span><span class="p">,</span>
            <span class="p">}));</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># /usr/bin/env python
# -*- coding: UTF-8 -*-
</span>
<span class="kn">import</span> <span class="nn">websocket</span> <span class="c1"># websocket-client
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">zlib</span>

<span class="n">ws_url</span> <span class="o">=</span> <span class="s">'wss://push.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'BTC_USDT_deals'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unsub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'unsub'</span><span class="p">:</span> <span class="s">'BTC_USDT_deals'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x01</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">zlib</span><span class="p">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">zlib</span><span class="p">.</span><span class="n">MAX_WBITS</span> <span class="o">|</span> <span class="mi">32</span><span class="p">)</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x00</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># print(message)
</span>    <span class="n">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"### closed ###"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_open</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">get_sub_str</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
    <span class="n">websocket</span><span class="p">.</span><span class="n">enableTrace</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">websocket</span><span class="p">.</span><span class="n">WebSocketApp</span><span class="p">(</span><span class="n">ws_url</span><span class="p">,</span>
                                <span class="n">on_message</span><span class="o">=</span><span class="n">on_message</span><span class="p">,</span>
                                <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
                                <span class="n">on_close</span><span class="o">=</span><span class="n">on_close</span><span class="p">)</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="n">on_open</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">run_forever</span><span class="p">(</span><span class="n">ping_interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ping_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">connect</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WebSocketSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO.Compression</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Example</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

  <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
  <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Decompress</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MemoryStream</span> <span class="n">msIn</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">MemoryStream</span> <span class="n">msOut</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">();</span>

        <span class="n">GZipStream</span> <span class="n">cprs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GZipStream</span><span class="p">(</span><span class="n">msIn</span><span class="p">,</span> <span class="n">CompressionMode</span><span class="p">.</span><span class="n">Decompress</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">CopyTo</span><span class="p">(</span><span class="n">msOut</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">msOut</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span><span class="c1">//通常の文字列に変換する</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">string</span> <span class="n">wsuri</span> <span class="p">=</span> <span class="s">"wss://push.trade-planets.com"</span><span class="p">;</span>
      <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">ws</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WebSocket</span> <span class="p">(</span><span class="n">wsuri</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ws</span><span class="p">.</span><span class="n">OnMessage</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"recv: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsText</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"data[0]: {"</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsBinary</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 1"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="nf">Decompress</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 0"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">};</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Connect</span> <span class="p">();</span>

        <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"BTC_USDT_deals"</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Send</span> <span class="p">(</span><span class="n">payload</span><span class="p">);</span>

        <span class="n">ConsoleKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">do</span>
    <span class="err">　　</span><span class="p">{</span>
    <span class="err">　　</span>      <span class="n">key</span><span class="p">=</span><span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
    <span class="err">　　</span>
    <span class="err">　　</span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">key</span> <span class="p">!=</span> <span class="n">ConsoleKey</span><span class="p">.</span><span class="n">Q</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<p>第一次会返回全量数据，接下来会返回增量数据。注意t=0和t=1时数据结构的区别。</p>

<ul>
<li>1.サブスクリプションパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, DOGE_ETH, BTC_USDT, ETH_USDT......</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>${pair} + &#39;_deals&#39;</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">topic:</span><span class="w"> </span><span class="err">'BTC_USDT_deals'</span><span class="p">,</span><span class="w">
  </span><span class="err">t:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="err">d:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="err">'BTC_USDT'</span><span class="p">,</span><span class="w">
    </span><span class="err">'</span><span class="mf">38640.9</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="err">'</span><span class="mf">0.005175</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="err">'</span><span class="mi">2</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="err">'</span><span class="mi">1646709274432</span><span class="err">'</span><span class="p">,</span><span class="w">
    </span><span class="err">'</span><span class="mi">36292624</span><span class="err">'</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>t</td>
<td>0 は完全データを表し、1 は増分データを表します</td>
</tr>
<tr>
<td>d</td>
<td>数组定义：取引ペア,成約価格,成約価値,taker成約方向(1-購入、2-販売),成約タイムスタンプ</td>
</tr>
</tbody></table>
<h2 id='ticker-2'>订阅 Ticker 数据</h2>
<blockquote>
<p>完全な例</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tradeplanetws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.trade-planets.com</span><span class="dl">'</span><span class="p">;</span>


<span class="kd">let</span> <span class="nx">wsClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">data1</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">wsClass</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_initWs</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">);</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">ws</span> <span class="o">=</span> <span class="nx">ws</span><span class="p">;</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">)</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC_USDT_ticker</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">_decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wsClass</span><span class="p">();</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">_initWs</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># /usr/bin/env python
# -*- coding: UTF-8 -*-
</span>
<span class="kn">import</span> <span class="nn">websocket</span> <span class="c1"># websocket-client
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">zlib</span>

<span class="n">ws_url</span> <span class="o">=</span> <span class="s">'wss://push.trade-planets.com'</span>


<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'BTC_USDT_ticker'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unsub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'unsub'</span><span class="p">:</span> <span class="s">'BTC_USDT_ticker'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x01</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">zlib</span><span class="p">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">zlib</span><span class="p">.</span><span class="n">MAX_WBITS</span> <span class="o">|</span> <span class="mi">32</span><span class="p">)</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x00</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># print(message)
</span>    <span class="n">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"### closed ###"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_open</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">get_sub_str</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
    <span class="n">websocket</span><span class="p">.</span><span class="n">enableTrace</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">websocket</span><span class="p">.</span><span class="n">WebSocketApp</span><span class="p">(</span><span class="n">ws_url</span><span class="p">,</span>
                                <span class="n">on_message</span><span class="o">=</span><span class="n">on_message</span><span class="p">,</span>
                                <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
                                <span class="n">on_close</span><span class="o">=</span><span class="n">on_close</span><span class="p">)</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="n">on_open</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">run_forever</span><span class="p">(</span><span class="n">ping_interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ping_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">connect</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WebSocketSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO.Compression</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Example</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

  <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
  <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Decompress</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MemoryStream</span> <span class="n">msIn</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">MemoryStream</span> <span class="n">msOut</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">();</span>

        <span class="n">GZipStream</span> <span class="n">cprs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GZipStream</span><span class="p">(</span><span class="n">msIn</span><span class="p">,</span> <span class="n">CompressionMode</span><span class="p">.</span><span class="n">Decompress</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">CopyTo</span><span class="p">(</span><span class="n">msOut</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">msOut</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span><span class="c1">//通常の文字列に変換する</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">string</span> <span class="n">wsuri</span> <span class="p">=</span> <span class="s">"wss://push.trade-planets.com"</span><span class="p">;</span>
      <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">ws</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WebSocket</span> <span class="p">(</span><span class="n">wsuri</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ws</span><span class="p">.</span><span class="n">OnMessage</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"recv: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsText</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"data[0]: {"</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsBinary</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 1"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="nf">Decompress</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 0"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">};</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Connect</span> <span class="p">();</span>

        <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"BTC_USDT_ticker"</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Send</span> <span class="p">(</span><span class="n">payload</span><span class="p">);</span>

        <span class="n">ConsoleKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">do</span>
    <span class="err">　　</span><span class="p">{</span>
    <span class="err">　　</span>      <span class="n">key</span><span class="p">=</span><span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
    <span class="err">　　</span>
    <span class="err">　　</span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">key</span> <span class="p">!=</span> <span class="n">ConsoleKey</span><span class="p">.</span><span class="n">Q</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.サブスクリプションパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>pair</td>
<td>true</td>
<td>string</td>
<td>取引ペア</td>
<td></td>
<td>DOGE_BTC, DOGE_ETH, BTC_USDT, ETH_USDT......</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>${pair} + &#39;_ticker&#39;</td>
</tr>
</tbody></table>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"BTC_USDT_ticker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:[</span><span class="w">
    </span><span class="s2">"BTC_USDT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"38635.8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"38635.80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"246109.80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"39526.4000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"37152.6000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"38635.7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"0.053551"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"38635.8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"0.012292"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"4388.91754000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"+2.66%"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"1646709436031"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"246109.80000000"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>3.リターンフィールド</li>
</ul>

<p>[
取引ペア,
最新の成約価格,
最新の成約価格(usd),
最新の成約価格(cny),
24h最高価格,
24h最低価格,
最新の購入価格,
一つ買う価値,
最新の1つ売る价,
1つ売る価値,
24h成約価値,
24h見積変更,
タイムスタンプ,
最新の成約价(cny)
]</p>
<h2 id='b16a0fda36'>订阅用户数据方法</h2>
<blockquote>
<p>实际例子</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">zlib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">zlib</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tradeplanetws</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">wss://push.trade-planets.com</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 1.リクエストパス</span>

<span class="kd">let</span> <span class="nx">ws</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">900625568558820892a8c833c33ebc8fd2701efe</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 你的apikey</span>
<span class="kd">let</span> <span class="nx">secret</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">c708ac3e70d115ec29efbee197330627d7edf842</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// apikey的密码</span>

<span class="kd">let</span> <span class="nx">subparam</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="c1">// 格式化参数对象，得到subparam</span>
    <span class="nx">apikey</span><span class="p">,</span>
    <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ALL_ALL_login</span><span class="dl">'</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacMD5</span><span class="p">(</span><span class="nx">subparam</span><span class="p">,</span> <span class="nb">String</span><span class="p">(</span><span class="nx">secret</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// 用apikey的密码secret对得到subparam进行HmacMD5签名，得到签名结果sign</span>
<span class="kd">let</span> <span class="nx">form</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// 得到最终的订阅参数</span>
    <span class="nx">apikey</span><span class="p">,</span>
    <span class="nx">sign</span><span class="p">,</span>
    <span class="na">sub</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ALL_ALL_login</span><span class="dl">'</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">form</span><span class="dl">'</span><span class="p">,</span> <span class="nx">form</span><span class="p">)</span>

<span class="kd">let</span> <span class="nx">reiniting</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">resend</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!=</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">resend</span><span class="p">(</span><span class="nx">user_id</span><span class="p">);</span>
        <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">form</span><span class="p">));</span>
<span class="p">};</span>

<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span> <span class="o">&amp;&amp;</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ws</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">reinit</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reiniting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">reiniting</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ws</span> <span class="o">&amp;&amp;</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">manu close </span><span class="dl">'</span><span class="p">)</span>
            <span class="nx">ws</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">init</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">30</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user_id</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">init</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user_id</span><span class="p">);</span>
    <span class="nx">reiniting</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="nx">tradeplanetws</span><span class="p">);</span>

    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ws</span> <span class="o">||</span> <span class="nx">ws</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!=</span> <span class="nx">WebSocket</span><span class="p">.</span><span class="nx">OPEN</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">reinit</span><span class="p">(</span><span class="nx">user_id</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">);</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>

        <span class="nx">resend</span><span class="p">(</span><span class="nx">user_id</span><span class="p">);</span>

    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">close, </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="nx">reinit</span><span class="p">(</span><span class="nx">user_id</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="nx">reinit</span><span class="p">(</span><span class="nx">user_id</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ping on</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">pong</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// console.log('pong ', err.toString('utf8'));</span>
    <span class="p">});</span>

    <span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">incoming</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">decodeMsg</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
        <span class="p">}</span>

    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">login</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reiniting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">reiniting</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">init</span><span class="p">();</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">decodeMsg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">zlib</span><span class="p">.</span><span class="nx">unzip</span><span class="p">(</span><span class="nx">data1</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">3</span><span class="dl">'</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">4</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">login</span><span class="p">();</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># /usr/bin/env python
# -*- coding: UTF-8 -*-
</span>
<span class="kn">import</span> <span class="nn">websocket</span> <span class="c1"># websocket-client
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">zlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="n">ws_url</span> <span class="o">=</span> <span class="s">'wss://push.trade-planets.com'</span>
<span class="n">apikey</span> <span class="o">=</span> <span class="s">'900625568558820892a8c833c33ebc8fd2701efe'</span>  <span class="c1"># your apikey
</span><span class="n">secret</span> <span class="o">=</span> <span class="s">'c708ac3e70d115ec29efbee197330627d7edf842'</span>  <span class="c1"># your apikey secret
</span>

<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span> <span class="s">"</span><span class="se">\"</span><span class="s">"</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_sign</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">data</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">get_sub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'apikey'</span><span class="p">:</span> <span class="n">apikey</span><span class="p">,</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'ALL_ALL_login'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="n">sign</span> <span class="o">=</span> <span class="n">get_sign</span><span class="p">(</span><span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">),</span> <span class="n">secret</span><span class="p">)</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'apikey'</span><span class="p">:</span> <span class="n">apikey</span><span class="p">,</span>
        <span class="s">'sign'</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span>
        <span class="s">'sub'</span><span class="p">:</span> <span class="s">'ALL_ALL_login'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># print(stringify(subdata))
</span>    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_unsub_str</span><span class="p">():</span>
    <span class="n">subdata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'unsub'</span><span class="p">:</span> <span class="s">'ALL_ALL_login'</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringify</span><span class="p">(</span><span class="n">subdata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">'</span><span class="se">\x01</span><span class="s">'</span> <span class="ow">or</span> <span class="n">message</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">zlib</span><span class="p">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">zlib</span><span class="p">.</span><span class="n">MAX_WBITS</span> <span class="o">|</span> <span class="mi">32</span><span class="p">)</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jmsgs</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">jmsgs</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="c1"># print(message)
</span>    <span class="n">decode_data</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"### closed ###"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">on_open</span><span class="p">(</span><span class="n">ws</span><span class="p">):</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">get_sub_str</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
    <span class="n">websocket</span><span class="p">.</span><span class="n">enableTrace</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">websocket</span><span class="p">.</span><span class="n">WebSocketApp</span><span class="p">(</span><span class="n">ws_url</span><span class="p">,</span>
                                <span class="n">on_message</span><span class="o">=</span><span class="n">on_message</span><span class="p">,</span>
                                <span class="n">on_error</span><span class="o">=</span><span class="n">on_error</span><span class="p">,</span>
                                <span class="n">on_close</span><span class="o">=</span><span class="n">on_close</span><span class="p">)</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">on_open</span> <span class="o">=</span> <span class="n">on_open</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">run_forever</span><span class="p">(</span><span class="n">ping_interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ping_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">connect</span><span class="p">()</span>

</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WebSocketSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO.Compression</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json.Serialization</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Example</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SortContractResolver</span> <span class="p">:</span> <span class="n">DefaultContractResolver</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="nf">CreateProperties</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">MemberSerialization</span> <span class="n">memberSerialization</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">IList</span><span class="p">&lt;</span><span class="n">JsonProperty</span><span class="p">&gt;</span> <span class="n">properties</span> <span class="p">=</span> <span class="k">base</span><span class="p">.</span><span class="nf">CreateProperties</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">memberSerialization</span><span class="p">);</span>

            <span class="k">return</span> <span class="n">properties</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">.</span><span class="n">PropertyName</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

  <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
  <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Decompress</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">MemoryStream</span> <span class="n">msIn</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">MemoryStream</span> <span class="n">msOut</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MemoryStream</span><span class="p">();</span>

        <span class="n">GZipStream</span> <span class="n">cprs</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GZipStream</span><span class="p">(</span><span class="n">msIn</span><span class="p">,</span> <span class="n">CompressionMode</span><span class="p">.</span><span class="n">Decompress</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">CopyTo</span><span class="p">(</span><span class="n">msOut</span><span class="p">);</span>
        <span class="n">cprs</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">msOut</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span><span class="c1">//通常の文字列に変換する</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="kt">string</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="kt">string</span> <span class="n">source</span><span class="p">,</span> <span class="kt">string</span> <span class="n">key</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="n">HMACMD5</span> <span class="n">hmacmd</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HMACMD5</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
               <span class="kt">byte</span><span class="p">[]</span> <span class="n">inArray</span> <span class="p">=</span> <span class="n">hmacmd</span><span class="p">.</span><span class="nf">ComputeHash</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
               <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

               <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">inArray</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
               <span class="p">{</span>
                   <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">inArray</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"X2"</span><span class="p">));</span>
               <span class="p">}</span>

               <span class="n">hmacmd</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>

               <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">ToLower</span><span class="p">();</span>
           <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">string</span> <span class="n">wsuri</span> <span class="p">=</span> <span class="s">"wss://push.trade-planets.com"</span><span class="p">;</span>
        <span class="kt">string</span> <span class="n">apikey</span> <span class="p">=</span> <span class="s">"900625568558820892a8c833c33ebc8fd2701efe"</span><span class="p">;</span>
        <span class="kt">string</span> <span class="n">secret</span> <span class="p">=</span> <span class="s">"c708ac3e70d115ec29efbee197330627d7edf842"</span><span class="p">;</span>

      <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">ws</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WebSocket</span> <span class="p">(</span><span class="n">wsuri</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ws</span><span class="p">.</span><span class="n">OnMessage</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"recv: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsText</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"data[0]: {"</span><span class="p">);</span>

            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">IsBinary</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 1"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="nf">Decompress</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="s">"RawData[0]: 0"</span><span class="p">);</span>
                    <span class="kt">string</span> <span class="n">strres</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">RawData</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span> <span class="p">(</span><span class="n">strres</span><span class="p">);</span>

                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">};</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Connect</span> <span class="p">();</span>

        <span class="kt">var</span> <span class="n">myparam</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">apikey</span> <span class="p">=</span> <span class="n">apikey</span><span class="p">,</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"ALL_ALL_login"</span><span class="p">,</span>
        <span class="p">};</span>
        <span class="kt">string</span> <span class="n">myparamstr</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myparam</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>
        <span class="kt">string</span> <span class="n">sign</span> <span class="p">=</span> <span class="nf">HmacMD5</span><span class="p">(</span><span class="n">myparamstr</span><span class="p">,</span> <span class="n">secret</span><span class="p">);</span>


        <span class="kt">var</span> <span class="n">myobj</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span>
            <span class="n">apikey</span> <span class="p">=</span> <span class="n">apikey</span><span class="p">,</span>
            <span class="n">sign</span> <span class="p">=</span> <span class="n">sign</span><span class="p">,</span>
            <span class="n">sub</span> <span class="p">=</span> <span class="s">"ALL_ALL_login"</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="kt">string</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">myobj</span><span class="p">,</span> <span class="k">new</span> <span class="n">JsonSerializerSettings</span> <span class="p">{</span> <span class="n">ContractResolver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SortContractResolver</span><span class="p">()</span> <span class="p">});</span>

        <span class="n">ws</span><span class="p">.</span><span class="nf">Send</span> <span class="p">(</span><span class="n">payload</span><span class="p">);</span>

        <span class="n">ConsoleKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="k">do</span>
    <span class="err">　　</span><span class="p">{</span>
    <span class="err">　　</span>      <span class="n">key</span><span class="p">=</span><span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
    <span class="err">　　</span>
    <span class="err">　　</span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">key</span> <span class="p">!=</span> <span class="n">ConsoleKey</span><span class="p">.</span><span class="n">Q</span><span class="p">);</span>

      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<ul>
<li>1.リクエストパス</li>
</ul>

<p>wss://push.trade-planets.com</p>

<ul>
<li>2.リクエストパラメータ</li>
</ul>

<table><thead>
<tr>
<th>パラメータ名</th>
<th>それは必要ですか</th>
<th>タイプ</th>
<th>説明する</th>
<th>デフォルト値</th>
<th>範囲</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>true</td>
<td>string</td>
<td>申請している apikey</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>string</td>
<td>申請した apisecret を使用してリクエスト データ全体に署名します。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
<td>&#39;ALL_ALL_login&#39;</td>
</tr>
</tbody></table>

<ul>
<li>3.署名方法</li>
</ul>

<p>1.パラメータ オブジェクト param を定義するには、apikey が必要です</p>

<p>let apikey = &#39;thisisyourapikey&#39;;</p>

<p>let param = {
&quot;apikey&quot;: apikey,
&quot;sub&quot;: &quot;ALL_ALL_login&quot;
};</p>

<p>2.パラメータオブジェクト param をフォーマットして strParam を取得する</p>

<p>let strParam = JSON.stringify(param);</p>

<p>3.apikey のパスワード シークレットを使用して HmacMD5 署名 strParam に署名結果の署名を取得します</p>

<p>let CryptoJS = require(&quot;crypto-js&quot;);</p>

<p>let secret = &#39;c708ac3e70d115ec29efbee197330627d7edf842&#39;;</p>

<p>let sign = CryptoJS.HmacMD5(strParam, secret).toString();</p>

<p>4.サブスクリプションパラメータを生成する wsparam</p>

<p>let wsparam = {
&quot;apikey&quot;: apikey,
&quot;sign&quot;: sign,
&quot;sub&quot;: &quot;ALL_ALL_login&quot;
};</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"ALL_ALL_login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"订阅成功"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>4.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>&quot;订阅成功&quot; 代表订阅成功</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='e21415eb1a'>通貨資産のサブスクリプションユーザーデータ分析</h2>
<ul>
<li>1.主要なフィールド</li>
</ul>

<p>assets</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"ALL_ALL_login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"assets"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"normal"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"DOGE"</span><span class="p">:{</span><span class="w">
          </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"497.59601765"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"USDT"</span><span class="p">:{</span><span class="w">
          </span><span class="nl">"balance"</span><span class="p">:</span><span class="s2">"20.52027574"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"freeze"</span><span class="p">:</span><span class="s2">"22.12000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>normal</td>
<td>アカウント資産</td>
</tr>
<tr>
<td>balance</td>
<td>利用可能なアセット</td>
</tr>
<tr>
<td>freeze</td>
<td>資産を凍結する</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='0969976190'>通貨注文のユーザーデータ分析を購読する</h2>
<ul>
<li>1.主要なフィールド</li>
</ul>

<p>orderpending</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"ALL_ALL_login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"orderpending"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"12875281286404369"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_oid"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.053000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deal_price"</span><span class="p">:</span><span class="s2">"0.000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vamount"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deal_amount"</span><span class="p">:</span><span class="s2">"0.0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"5.30000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deal_money"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deal_count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deal_percent"</span><span class="p">:</span><span class="s2">"0.00%"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unexecuted"</span><span class="p">:</span><span class="s2">"100.0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604325924719</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>count</td>
<td>現在のページのレコード数。次のページがある場合は、count = 現在のページのレコード数 + 1</td>
</tr>
<tr>
<td>page</td>
<td>1から始まるどのページ</td>
</tr>
<tr>
<td>items</td>
<td>レコードリスト</td>
</tr>
<tr>
<td>id</td>
<td>注文ID</td>
</tr>
<tr>
<td>client_oid</td>
<td>自定义id</td>
</tr>
<tr>
<td>createdAt</td>
<td>作成時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>手数料価格</td>
</tr>
<tr>
<td>amount</td>
<td>手数料の金額</td>
</tr>
<tr>
<td>money</td>
<td>預けた金額</td>
</tr>
<tr>
<td>deal_amount</td>
<td>成約量</td>
</tr>
<tr>
<td>deal_percent</td>
<td>トランザクションの割合</td>
</tr>
<tr>
<td>unexecuted</td>
<td>未成約量</td>
</tr>
<tr>
<td>status</td>
<td>ステータス、-1 失敗、0 または 1 - 保留中の合意、2 - 部分的な合意、3 - 完全な合意、4 - 部分的な取り消し、5 - 完全な取り消し</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h2 id='566ec1f766'>通貨協定の詳細の加入者データ分析</h2>
<ul>
<li>1.主要なフィールド</li>
</ul>

<p>history</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">"ALL_ALL_login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"t"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"d"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"history"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"2251799825471069694"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"account_type"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"coin_symbol"</span><span class="p">:</span><span class="s2">"DOGE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency_symbol"</span><span class="p">:</span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"0.050921"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"64.2237"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"money"</span><span class="p">:</span><span class="s2">"3.27033502"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_from"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_side"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relay_id"</span><span class="p">:</span><span class="s2">"12939052839213054"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="mi">1604387364308</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<ul>
<li>2.リターンフィールド</li>
</ul>

<table><thead>
<tr>
<th>名前</th>
<th>説明する</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>0 は成功を表し、それ以外の場合は失敗を表します</td>
</tr>
<tr>
<td>id</td>
<td>成約id</td>
</tr>
<tr>
<td>createdAt</td>
<td>成約時間</td>
</tr>
<tr>
<td>account_type</td>
<td>口座の種類 0-スポットアカウント</td>
</tr>
<tr>
<td>coin_symbol</td>
<td>取引通貨</td>
</tr>
<tr>
<td>currency_symbol</td>
<td>価格設定通貨</td>
</tr>
<tr>
<td>order_side</td>
<td>取引の方向性，1-購入、2-販売</td>
</tr>
<tr>
<td>order_type</td>
<td>注文タイプ 1-成行注文、2-指値注文</td>
</tr>
<tr>
<td>price</td>
<td>成約価格</td>
</tr>
<tr>
<td>amount</td>
<td>成約量</td>
</tr>
<tr>
<td>money</td>
<td>成約额</td>
</tr>
<tr>
<td>fee</td>
<td>手数料</td>
</tr>
<tr>
<td>is_maker</td>
<td>是否maker</td>
</tr>
<tr>
<td>relay_id</td>
<td>关联注文ID</td>
</tr>
<tr>
<td>その他の分野</td>
<td>忘れる</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1><h2 id='044106d39a'>エラーコード</h2>
<table><thead>
<tr>
<th>Code</th>
<th>説明する</th>
<th>Msg</th>
</tr>
</thead><tbody>
<tr>
<td>2003</td>
<td>Cookie 無効</td>
<td>Cookie expired</td>
</tr>
<tr>
<td>2033</td>
<td>操作に失敗しました！ 注文が完了またはキャンセルされました</td>
<td>Operation failed! Order completed or canceled</td>
</tr>
<tr>
<td>2034</td>
<td>操作に失敗しました！ パラメータが正しいかどうかを確認してください</td>
<td>Operation failed! Please check parameter</td>
</tr>
<tr>
<td>2040</td>
<td>操作に失敗しました！ そんな順番はないよ</td>
<td>Operation failed! No record</td>
</tr>
<tr>
<td>2064</td>
<td>注文はキャンセルされており、再度キャンセルすることはできません</td>
<td>Canceling. Unable to cancel again</td>
</tr>
<tr>
<td>2065</td>
<td>注文価格の設定が高すぎます。価格をリセットしてください</td>
<td>Precatory price is exorbitant, please reset</td>
</tr>
<tr>
<td>2066</td>
<td>注文価格の設定が低すぎます。価格をリセットしてください</td>
<td>Precatory price is low , please reset</td>
</tr>
<tr>
<td>2067</td>
<td>成行注文は現在サポートされていません</td>
<td>Limit Order Only</td>
</tr>
<tr>
<td>2068</td>
<td>注文数量は 0.0001 未満にすることはできません</td>
<td>Min Amount:0.0001</td>
</tr>
<tr>
<td>2078</td>
<td>注文価格が不正です</td>
<td>unvalid order price</td>
</tr>
<tr>
<td>2085</td>
<td>通貨の最低注文数量制限</td>
<td>the trade amount is low</td>
</tr>
<tr>
<td>2086</td>
<td>異常な口座資産、注文制限</td>
<td>Abnormal account assets, trade is forbiden</td>
</tr>
<tr>
<td>2091</td>
<td>リクエストが多すぎます。後でもう一度お試しください。</td>
<td>request is too frequency, please try again later</td>
</tr>
<tr>
<td>2092</td>
<td>通貨の最低注文金額制限</td>
<td>Minimum amount not met</td>
</tr>
<tr>
<td>3000</td>
<td>リクエストパラメータエラー</td>
<td>Requested parameter incorrect</td>
</tr>
<tr>
<td>3002</td>
<td>パラメータを空にすることはできません</td>
<td>Parameter cannot be null</td>
</tr>
<tr>
<td>3010</td>
<td>websocket接続異常</td>
<td>websocket connection error</td>
</tr>
<tr>
<td>3011</td>
<td>インターフェイスは apikey リクエスト メソッドをサポートしていません</td>
<td>Illegal subscribe event</td>
</tr>
<tr>
<td>3012</td>
<td>apikey無効</td>
<td>Interface does not support apikey request method</td>
</tr>
<tr>
<td>3016</td>
<td>取引ペアエラー</td>
<td>Invalid apikey</td>
</tr>
<tr>
<td>3024</td>
<td>apikey権限が不十分です</td>
<td>apikey authorization insufficient</td>
</tr>
<tr>
<td>3025</td>
<td>apikey署名の検証に失敗しました</td>
<td>apikey signature verification failed</td>
</tr>
<tr>
<td>3026</td>
<td>apikey ip制限付き</td>
<td>apikey ip is restricted</td>
</tr>
<tr>
<td>3027</td>
<td>アカウントがありませんapikey</td>
<td>No apikey in your account</td>
</tr>
<tr>
<td>3028</td>
<td>アカウント APIKEY の数が制限を超えています</td>
<td>Account apikey has exceeded the limit amount</td>
</tr>
<tr>
<td>3029</td>
<td>apikey で許可される IP の数が制限を超えています</td>
<td>apikey ip has exceeded the limit amount</td>
</tr>
<tr>
<td>4000</td>
<td>現在のネットワーク接続は不安定です。後でもう一度お試しください。</td>
<td>the network is unstable now, please try again later</td>
</tr>
<tr>
<td>4003</td>
<td>サーバーがビジーです。後でもう一度お試しください。</td>
<td>The server is busy, please try again later</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="csharp">csharp</a>
          </div>
      </div>
    </div>
  </body>
      <script>
        const lang_btn1 = document.getElementById('lang_box1');
        const lang_btn2 = document.getElementById('lang_box2');
        const spot_class = document.getElementById('spot-class-current');
        const future_class = document.getElementById('future-class-current');
        const spot_txt = document.getElementById('spot-txt');
        const future_txt = document.getElementById('future-txt');
        const biboxLogo = document.getElementById('trade-planet-logo')

        const url = GetUrlRelativePath();

        if(url.indexOf('en') != -1){
          //英文
          spot_txt.innerHTML = 'Spot'
          spot_txt.href = spot_txt.href.replace('zh/', 'en/');
          future_txt.innerHTML = 'USDT-M'
          future_txt.href=future_txt.href.replace('zh/', 'en/');
          lang_btn1.innerHTML = '日本語'
          lang_btn1.href=url.replace('en/', 'ja/');
          lang_btn2.innerHTML = '简体中文'
          lang_btn2.href=url.replace('en/', 'zh/');
          biboxLogo.onclick = function () {
            window.location.href = 'https://www.trade-planets.com/en'
          }
        } else if (url.indexOf('ja') != -1) {
          //日文
          spot_txt.innerHTML = '現物取引'
          spot_txt.href = spot_txt.href.replace('zh/', 'ja/');
          future_txt.innerHTML = 'U本位永続契約'
          future_txt.href=future_txt.href.replace('zh/', 'ja/');
          lang_btn1.innerHTML = '简体中文'
          lang_btn1.href=url.replace('ja/', 'zh/');
          lang_btn2.innerHTML = 'English'
          lang_btn2.href=url.replace('ja/', 'en/');
          biboxLogo.onclick = function () {
            window.location.href = 'https://www.trade-planets.com/ja'
          }
        } else {
          //中文
          spot_txt.innerHTML = '现货'
          spot_txt.href = spot_txt.href.replace('zh/', 'zh/');
          future_txt.innerHTML = 'U本位永续合约'
          future_txt.href = future_txt.href.replace('zh/', 'zh/');
          lang_btn1.innerHTML = '日本語'
          lang_btn1.href=url.replace('zh/', 'ja/');
          lang_btn2.innerHTML = 'English'
          lang_btn2.href=url.replace('zh/', 'en/');
          biboxLogo.onclick = function () {
            window.location.href = 'https://www.trade-planets.com/zh'
          }
        }

        if(location.href.indexOf('/spot/') > 0){
          spot_class.className = 'nav-select current';
        } else if(location.href.indexOf('/futures/') > 0){
          future_class.className = 'nav-select current';
        }
        function GetUrlRelativePath(){
          let url = document.location.toString();
          let arrUrl = url.split("//");
          let start = arrUrl[1].indexOf("/");
          let relUrl = arrUrl[1].substring(start);
          if(relUrl.indexOf("?") != -1){
            relUrl = relUrl.split("?")[0];
          }
          if(relUrl.indexOf("#") != -1){
            relUrl = relUrl.split("#")[0];
          }
          return relUrl;
    　　}
      </script>
</html>
